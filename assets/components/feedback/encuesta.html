<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Encuestas - Dashboard</title>
    <link rel="stylesheet" href="../../css/styles.css">
    <link rel="stylesheet" href="../../css/layout.css">
    <link rel="stylesheet" href="../../css/components.css">
</head>
<body>
    <div class="layout-container">
        <!-- Header placeholder -->
        <div id="headerContainer"></div>

        <!-- Sidebar placeholder -->
        <div id="sidebarContainer"></div>

        <main class="main-content">
            <div class="sistema-inventario">
                <h1>Generador de Encuestas</h1>
                
                <div id="mainContent">
                    <form id="form-encuesta" class="form-container">
                        <div id="tipo-container"></div>

                        <div class="form-group" id="nombres-container">
                            <label for="nombres">Nombres</label>
                            <input type="text" id="nombres" placeholder="Ingrese nombres">
                            <div id="nombres-error" class="error-message"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="ruc">RUC</label>
                            <input type="text" id="ruc" placeholder="Ingrese RUC">
                            <div id="ruc-error" class="error-message"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="correo">Correo electrónico</label>
                            <input type="email" id="correo" placeholder="Ingrese correo electrónico">
                            <div id="correo-error" class="error-message"></div>
                        </div>
                        
                        <button type="submit" id="crear-encuesta" disabled>Crear Encuesta</button>
                    </form>

                    <div id="progress-container" class="hidden">
                        <div id="loading-message">
                            Enviando encuesta<span class="dots">...</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                        <div id="success-message" class="hidden">Encuesta enviada!</div>
                    </div>

                    <div id="encuesta-container" class="hidden">
                        <!-- Aquí se generará la encuesta dinámicamente -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Load scripts in order -->
    <script src="../../js/config.js"></script>
    <script src="../../js/authCheck.js"></script>
    <script src="../../js/sidebar.js"></script>
    <script src="../../js/loadSidebar.js"></script>
    <script src="../../js/loadHeader.js"></script>
    <script src="../../js/search.js"></script>
    <script src="../feedback/app.js"></script>
    <script src="../feedback/endpoint.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const userDataStr = sessionStorage.getItem('userData');
            if (userDataStr) {
                const userData = JSON.parse(userDataStr);
                if (userData.grupo === 'kossomet') {
                    // Create new form-group for the dropdown
                    const tipoContainer = document.getElementById('tipo-container');
                    tipoContainer.className = 'form-group';
                    tipoContainer.innerHTML = `
                        <label for="tipo">Tipo</label>
                        <select id="tipo" name="tipo">
                            <option value="">Seleccione opción</option>
                            <option value="Ventas (OT)">Ventas (OT)</option>
                            <option value="Coordinador (Conformidad)">Coordinador (Conformidad)</option>
                        </select>
                        <div class="error-message"></div>
                    `;
                }
            }
        });
    </script>
</body>
</html>